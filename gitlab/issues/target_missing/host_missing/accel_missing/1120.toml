id = 1120
title = "Multiboot direct loading broken."
state = "closed"
created_at = "2022-07-27T01:52:28.201Z"
closed_at = "2022-07-29T00:23:02.331Z"
labels = ["workflow::Needs Info"]
url = "https://gitlab.com/qemu-project/qemu/-/issues/1120"
host-os = "Windows 11"
host-arch = "x86_64"
qemu-version = "QEMU emulator version 6.0.0 (v6.0.0-11869-g800a25ea45-dirty)"
guest-os = "n/a"
guest-arch = "n/a"
description = """This is my kernel and it's multiboot loader. It passed the check of `grub-file`, but QEMU could not load it.
```
qemu-system-i386: Error loading uncompressed kernel without PVH ELF Note
```

When I add `-machine type=pc-i440fx-3.1`, QEMU shows `qemu: linux kernel too old to load a ram disk` or `qemu: invalid kernel header`.

The multiboot file is linked with `ld.lld -s -o`.

[toop](/uploads/7f230dc39d6a3a8c43c4c720d31878c6/toop)[multiboot](/uploads/59faa4607dc2837b54c89b35db6f206a/multiboot)"""
reproduce = "n/a"
additional = "n/a"
