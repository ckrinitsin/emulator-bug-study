id = 1043
title = "QEMU cpu max doesnot work on Windows 11 with ryzen processor and whpx"
state = "opened"
created_at = "2022-05-28T00:24:11.657Z"
closed_at = "n/a"
labels = ["accel: WHPX", "hostos: Windows", "target: i386"]
url = "https://gitlab.com/qemu-project/qemu/-/issues/1043"
host-os = "(Windows 11)"
host-arch = "(x86)"
qemu-version = "(v7.0.0-11902-g1d935f4a02-dirty & v7.0.0-1245-g58b53669e8)"
guest-os = "(any)"
guest-arch = "(x86)"
description = """- System does not boot.
- WHPX: setting APIC emulation mode in the hypervisor
- Windows Hypervisor Platform accelerator is operational
- whpx: injection failed, MSI (0, 0) delivery: 0, dest_mode: 0, trigger mode: 0, vector: 0, lost (c0350005)
- qemu: WHPX: Unexpected VP exit code 4"""
reproduce = """1. Windows 11 / Ryzen
2. qemu-system-x86_64.exe --accel whpx --cpu max"""
additional = "n/a"
