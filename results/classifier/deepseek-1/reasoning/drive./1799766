<think>
Alright, let me try to work through this issue step by step. I'm not entirely familiar with QEMU's inner workings, so I'll take it slow and see if I can figure out what's going on.

First, the user is having trouble ejecting a floppy disk image in their QEMU setup. They provided two command examples where they tried to configure a floppy drive but couldn't get the `eject fda` command to work as expected.

Looking at the first example, it seems like the user is using `-drive` with `floppy`, which does allow ejecting via the monitor. But in the second example, they're using `-blockdev` without `-drive`, and eject doesn't work. The user included the output from the QEMU monitor's `info block` command, showing that the floppy device exists but isn't recognized when trying to eject it.

From the user's follow-up message, Max explains that there's a difference between using `-drive` and `-blockdev`. He mentions that `-drive` creates a part of the device that can be ejected, while `-blockdev` only sets up nodes in the block layer but doesn't make them ejectable through the monitor. Additionally, he points out that if you use `-global` instead of `-device`, you don't specify an ID for the floppy device, making it harder to eject because you need to know its QOM path.

Max also tries using `eject floppy` in the HMP (Human Monitor Protocol) but gets an error. However, when he uses QMP (Query Management Protocol), it works if he provides the correct device ID. This suggests that there's a bug where the HMP doesn't accept device IDs for ejecting, only drive IDs.

The user then confirms that they have issues with both `-drive` and `-blockdev`, but since `-drive` works, the problem is more about correctly configuring the block devices to be ejectable via the monitor. The main takeaway seems to be that when using `-blockdev`, the device isn't automatically given an ID, so you can't just eject it by name; instead, you have to use its QOM path or figure out a way to assign an ID.

I think the user is trying to set up a floppy drive image without using the legacy `-drive` option, perhaps for better configuration flexibility. But they're hitting a snag where their setup doesn't allow ejecting via `eject fda`. 

To solve this, Max suggests using `-device` and assigning an ID so that you can eject it by name in HMP. In his example, he uses `-device floppy,id=floppy,drive=fda` which then allows him to eject 'floppy' using QMP. However, the user tried this approach and still encountered issues because they used `-global` instead of `-device`, so that's a key point.

I should also consider whether there are any other parameters or configurations that need to be set when using `-blockdev` to ensure that the device is properly recognized for ejecting. Maybe adding `id` to the block devices could help, but I'm not sure if that's how it works in QEMU.

Another angle is checking the monitor commands and whether they support certain options or require specific setups. Perhaps there's a way to list all available devices with their IDs using `info devices` or something similar in HMP, which would then allow ejecting by the correct ID.

In summary, the user needs to ensure that when configuring their floppy drive using `-blockdev`, they also assign an appropriate device ID so that it can be ejected via the monitor. Using `-device` with an explicit ID is probably necessary here, and avoiding `-global` which doesn't set the ID. Additionally, there might be a bug in HMP where ejecting by device ID isn't supported, requiring the use of QMP instead.

I should also check if newer versions of QEMU have addressed this issue or if it's known behavior that requires specific commands to work around.
</think>

The issue arises when configuring a floppy drive using `-blockdev` without assigning an explicit device ID. To eject the drive via the monitor, you need to use its QOM path or ensure it has an assigned ID.

**Solution:**

1. **Use `-device` with an `id`:**
   Modify your QEMU command to include an `id` when adding the floppy device. This allows you to reference it by name in eject commands.

2. **Example Command:**
   ```bash
   qemu-system-i386 \
       -monitor stdio \
       -machine type=isapc,vmport=off \
       -blockdev driver=file,node-name=fda-img,filename=fda.img \
       -blockdev driver=raw,node-name=fda,file=fda-img \
       -device floppy,id=floppy,drive=fda \
       -serial msmouse
   ```

3. **Eject Using QMP:**
   Use the QEMU Monitor Protocol (QMP) to eject by ID:
   ```bash
   { "execute": "eject", "arguments": { "device_id": "floppy" } }
   ```

**Note:** If you prefer using HMP, ensure it supports ejecting by device ID or use the QOM path obtained from `info devices`.

By assigning an `id` to your floppy device and using appropriate monitor commands, you can successfully eject the drive.