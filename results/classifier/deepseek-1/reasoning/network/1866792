<think>
Okay, so I need to classify this bug report into one of the given categories. Let me read through it carefully.

The user is reporting an issue where formatting a VDI disk over NBD fails with mkfs.ext4. They mention that using a QCOW2 image works fine, but VDI causes the system to hang during formatting. This happens on Fedora 31 with kernel 5.5.7-200.fc31.x86_64.

Looking at the provided information, they used qemu-nbd to attach both images and then performed partitioning. The difference is the image format: QCOW2 works, VDI doesn't. So it's related to how QEMU handles VDI disks over NBD.

The user also refers to another bug report (#1661758) about data corruption in VDI-format disk images caused by qemu-nbd. That suggests a possible link between the two issues.

The categories I need to choose from are: mistranslation, assembly, other, device, graphic, socket, network, KVM, boot, vnc, debug, files, permissions, performance, kernel, peripherals, hypervisor.

Since this is about NBD and disk formatting with VDI images, which seems related to how QEMU handles block devices or storage. Device would cover hardware-related issues, but in this case, it's more about the virtual device handling in QEMU.

Alternatively, "files" might be relevant because it deals with file systems and image formats. However, since NBD is a network block device protocol, maybe "network" is also a consideration. But I think the primary issue here is related to how QEMU handles VDI images when using NBD, which falls under storage devices or block layer.

Wait, but looking at the categories again: there's "device", "graphic", etc., and perhaps "peripherals". Since NBD relates to network-attached disks, it might fall under a device category. But more specifically, since it's about formatting an image that works with other formats, it's likely related to how QEMU processes VDI images through NBD.

The bug report indicates that the problem occurs during formatting with mkfs.ext4, suggesting an issue with the block layer or storage handling in QEMU when using VDI images. Since NBD is part of QEMU's network block device support, and this failure happens during disk operations, it points towards a device-related issue, possibly under the "device" category.

But I'm not entirely sure because sometimes image formats might be under a different category like "files". However, since it's tied to NBD and block devices, "device" seems more appropriate.
</think>

network