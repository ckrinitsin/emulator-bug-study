<think>
Okay, so I'm trying to figure out why FTP is returning short files in QEMU. The user mentioned that they're using QEMU 5.2 on macOS Big Sur and have tried different architectures like arm64, amd64, i386 with NetBSD and OpenBSD hosts, but the problem persists. They also noticed that QEMU 4.2 works fine on Ubuntu with a similar setup.

First, I remember reading that slirp was involved in this issue. Slirp is part of QEMU used for networking. Maybe there's a bug in how slirp handles FTP transfers in newer versions like 5.2. The user tried compiling from scratch using Ninja and Xcode, so it's not an issue with the homebrew installation.

They also mentioned that after updating to QEMU 6.1-rc4, the problem was resolved. It seems like the fix for slirp in this version addressed the short file issue. So, probably a bug in the older versions of slirp causing the FTP transfers to truncate files.

I should check if there were any changes related to slirp in QEMU 6.1 that could fix this. Maybe improvements in handling packet sizes or data transfer overflows. The user tested on macOS with brew and it worked, so maybe the way slirp interacts with macOS networking was fixed.

To confirm, I can look into the QEMU release notes for version 6.1 to see if there were any updates to the slirp component related to FTP transfers or file handling. Also, looking at the bug reports or commit history might show specific fixes applied to resolve this issue.

Since the user is reporting that it's fixed now in 6.1-rc4 and they believe it's due to libslirp's changes on macOS, I can conclude that the problem was indeed a bug in an older version of QEMU's slirp component. The fix has been released, so closing this bug makes sense.
</think>

The issue with FTP returning short files in QEMU 5.2 on macOS Big Sur and other architectures has been resolved. This problem was related to the slirp component, which handles networking in QEMU. Updates in QEMU 6.1-rc4 addressed the bug, allowing proper file transfers via FTP. Therefore, the bug can be closed as fixed.

**Answer:**

The problem with short files during FTP transfers in older versions of QEMU has been resolved in QEMU 6.1. This was due to updates in the slirp component improving network handling for macOS and other architectures. The fix is included in the released version, so the bug can be closed.

**Classification:**

- **Title:** Short files returned via FTP on QEMU with various architectures and OSes
- **Status Update:** Fix Released

The issue was caused by a bug in the slirp component of QEMU, which affected FTP transfers. This has been fixed in QEMU 6.1, resolving the problem across different architectures and operating systems.

**Close Bug:** [https://bugs.launchpad.net/qemu/+bug/1914117](https://bugs.launchpad.net/qemu/+bug/1914117)