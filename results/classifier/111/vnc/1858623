vnc: 0.176
other: 0.173
semantic: 0.115
graphic: 0.098
device: 0.085
network: 0.065
performance: 0.060
PID: 0.052
debug: 0.040
files: 0.035
permissions: 0.028
socket: 0.028
boot: 0.026
KVM: 0.019
vnc: 0.410
graphic: 0.285
debug: 0.112
network: 0.039
other: 0.034
files: 0.030
performance: 0.022
device: 0.019
semantic: 0.016
socket: 0.010
PID: 0.008
boot: 0.007
permissions: 0.006
KVM: 0.002

VNC outputs garbage in zlib mode

TL;DR: When QEMU is launched with VNC as the output and viewed with a client that defaults to zlib VNC encoding, the resulting output tends to accumulate artifacts.

Reproduction:
Launch QEMU (tried with versions 4.2.0 and 4.1.0 on Linux  64bit) with -vnc 0.0.0.0:0
Connect to it with a VNC client that allows you to select encoding, i.e. UltraVNC.
Set encoding to zlib (type 6), 32bit color.
As screen content changes it starts accumulating artifacts. Almost certain to appear if you open-close windows over a pattern.
Does not seem to depend on guest used, but easier to reproduce with a GUI.

Looks like this: https://orbides.org/img/vnc.png

It appears to be a deflate glitch of some sort - all of the bad pixels are generated by length/distance codes. Can't narrow it down any more.

The QEMU project is currently considering to move its bug tracking to
another system. For this we need to know which bugs are still valid
and which could be closed already. Thus we are setting older bugs to
"Incomplete" now.

If you still think this bug report here is valid, then please switch
the state back to "New" within the next 60 days, otherwise this report
will be marked as "Expired". Or please mark it as "Fix Released" if
the problem has been solved with a newer version of QEMU already.

Thank you and sorry for the inconvenience.


[Expired for QEMU because there has been no activity for 60 days.]

